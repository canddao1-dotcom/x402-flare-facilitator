# 2026-01-29 Session Notes

## SparkDex V3.1 Deep Dive
- Discovered and tested **34 pools** with liquidity
- **Key difference from Enosys**: SparkDex uses original SwapRouter interface WITH `deadline` in struct (Enosys SwapRouter02 doesn't have deadline)
- Created `skills/wallet/scripts/swap-sparkdex.js` for SparkDex swaps
- Tested pools: WFLR/sFLR, WFLR/FXRP, WFLR/USDT0, WFLR/stXRP, FXRP/USDT0, FXRP/sFLR, USDT0/USDC.e
- Pool test results: 24/34 passed (71% success rate)
- Failed pools mostly had low liquidity (1% fee tiers)

## OpenOcean Aggregator
- Router on Flare: `0x6352a56caadC4F1E25CD6c75970Fa768A3304e64`
- API works for quotes but multi-hop swap routes tend to revert
- Direct DEX swaps more reliable than aggregator routing

## New Tokens Discovered
- **SPRK** (SparkDex): `0x657097cc15fdec9e383db8628b57ea4a763f2ba0` - 18 decimals
- **HLN** (Helion): `0x140D8d3649Ec605CF69018C627fB44cCC76eC89f` - 18 decimals, on Enosys not SparkDex

## Upshift Vault Fix
- **Bug**: Was using `fxrp.balanceOf(vault)` which only shows reserve (~170K FXRP)
- **Fix**: Use `vault.getTotalAssets()` for actual TVL (~5.76M FXRP = $10.37M)
- 97.7% utilization - most FXRP deployed to yield strategies
- Share price: 1.003084 FXRP/earnXRP (slight yield accrued above 1:1)

## New Skills Tested
- `/upshift` - deposit/redeem from Upshift FXRP vault
- `/cdp` - Enosys Loans stability pool deposits
- `/spectra` - Yield trading (PT/YT tokens)
- `/portfolio` - Unified portfolio view

## Agent Wallet Activity
- Made test swaps across SparkDex and Enosys
- Acquired: 20 SPRK, 15.15 HLN, stXRP for Spectra
- Deposited: 9.81 FXRP to Upshift, 1 CDP to each stability pool, 2 stXRP to Spectra
- Portfolio value: ~$1,050

## DAO Treasury Status
- Total value: ~$48.8K
- V2 LP (BANK/WFLR): $22.4K across Enosys + SparkDex
- V3 LP (stXRP/FXRP): $2K
- Stability pools: 2.3K CDP
- Claimable: 287 rFLR vested + 3K WFLR rewards
